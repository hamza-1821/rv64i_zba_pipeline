Compiling C to assembly...
riscv64-unknown-elf-gcc -march=rv64i_zba -mabi=lp64 -O2 -nostdlib -fno-builtin -ffunction-sections -fdata-sections -S -o /home/humza/pmp_test/rv64i_zba_core/build/test.s /home/humza/pmp_test/rv64i_zba_core/sw/test.c
✓ Assembly: /home/humza/pmp_test/rv64i_zba_core/build/test.s
Assembling to object file...
riscv64-unknown-elf-gcc -march=rv64i_zba -mabi=lp64 -O2 -nostdlib -fno-builtin -ffunction-sections -fdata-sections -c -o /home/humza/pmp_test/rv64i_zba_core/build/test.o /home/humza/pmp_test/rv64i_zba_core/build/test.s
✓ Object: /home/humza/pmp_test/rv64i_zba_core/build/test.o
Linking to ELF...
riscv64-unknown-elf-gcc -march=rv64i_zba -mabi=lp64 -O2 -nostdlib -fno-builtin -ffunction-sections -fdata-sections -Wl,-Ttext=0x00000000 -o /home/humza/pmp_test/rv64i_zba_core/build/test.elf /home/humza/pmp_test/rv64i_zba_core/build/test.o
/home/humza/opt/riscv64/lib/gcc/riscv64-unknown-elf/15.2.0/../../../../riscv64-unknown-elf/bin/ld: warning: cannot find entry symbol _start; defaulting to 0000000000000000
✓ ELF: /home/humza/pmp_test/rv64i_zba_core/build/test.elf
Extracting binary...
riscv64-unknown-elf-objcopy -O binary /home/humza/pmp_test/rv64i_zba_core/build/test.elf /home/humza/pmp_test/rv64i_zba_core/build/test.bin
✓ Binary: /home/humza/pmp_test/rv64i_zba_core/build/test.bin
Generating hex file...
Converted 188 bytes to /home/humza/pmp_test/rv64i_zba_core/build/instr_mem.hex
✓ Hex: /home/humza/pmp_test/rv64i_zba_core/build/instr_mem.hex
✓ Simulation files prepared
Compiling testbench...
tb_processor.sv:103: warning: Static variable initialization requires explicit lifetime in this context.
tb_processor.sv:118: warning: Static variable initialization requires explicit lifetime in this context.
tb_processor.sv:354: warning: Static variable initialization requires explicit lifetime in this context.
tb_processor.sv:355: warning: Static variable initialization requires explicit lifetime in this context.
imm_gen.sv:109: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
imm_gen.sv:109: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
imm_gen.sv:109: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
imm_gen.sv:109: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
imm_gen.sv:109: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
control_unit.sv:63: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
rv64_core.sv:233: warning: Port 11 (alu_op) of control_unit expects 5 bits, got 4.
rv64_core.sv:233:        : Padding 1 high bits of the port.
alu_control.sv:58: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
alu.sv:75: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
rv64_core.sv:357: sorry: constant selects in always_* processes are not currently supported (all bits will be included).
tb_processor.sv:125: warning: System task ($display) cannot be synthesized in an always_ff process.
✓ Testbench compiled

Running simulation...
[0 ns] Instruction memory initialized from instr_mem.hex
First 10 instructions (word-addressed):
  [0x00000000]: 0x000017b7
  [0x00000004]: 0x09600713
  [0x00000008]: 0x10e7b023
  [0x0000000c]: 0x000017b7
  [0x00000010]: 0x03200713
  [0x00000014]: 0x10e7b423
  [0x00000018]: 0x000017b7
  [0x0000001c]: 0x07b00713
  [0x00000020]: 0x00e7b023
  [0x00000024]: 0x0007b703
[0 ns] Data memory initialized (cleared)


================================================================================
RV64I + Zba Processor Simulation Started
================================================================================
Clock period: 10 ns
Simulation timeout: 100000 cycles
================================================================================

VCD info: dumpfile tb_processor.vcd opened for output.
[45 ns] Reset released
[45 ns] Simulation active, processor reset released
[45 ns] Stack pointer initialized to 0x9000
[45 ns] Starting execution trace...

[1000045 ns] Test program execution completed

[ERROR] Simulation timeout - reached 100000 cycles without completion


================================================================================
Test Results - RAW MEMORY DUMP
================================================================================

Data Memory Contents (all 4096 entries):



================================================================================
Test Results - EXPECTED LOCATIONS
================================================================================

Results stored at memory location 0x0000000000001100 (dword index 0x0000000000000220):

✗ FAIL: Sum (100 + 50)                           Expected=0x0000000000000096 Actual=0x0000000000000000
✗ FAIL: Difference (100 - 50)                    Expected=0x0000000000000032 Actual=0x0000000000000000
✗ FAIL: Loaded Value (reloaded from memory)      Expected=0x0000000000000096 Actual=0x0000000000000000
✗ FAIL: Branch Result (BEQ: sum == 150)          Expected=0x0000000000000001 Actual=0x0000000000000000
✓ PASS: Branch Result 2 (BNE: diff != 50, false) Expected=0x0000000000000000 Actual=0x0000000000000000
✗ FAIL: Branch Result 3 (BLT: diff < sum)        Expected=0x0000000000000001 Actual=0x0000000000000000
✗ FAIL: Branch Result 4 (BGE: sum >= 150)        Expected=0x0000000000000001 Actual=0x0000000000000000
✗ FAIL: Dword Loaded (Zba SH3ADD test)           Expected=0x0000000000003039 Actual=0x0000000000000000
✗ FAIL: AND Result (100 & 50)                    Expected=0x0000000000000020 Actual=0x0000000000000000
✗ FAIL: OR Result (100 | 50)                     Expected=0x0000000000000076 Actual=0x0000000000000000
✗ FAIL: XOR Result (100 ^ 50)                    Expected=0x0000000000000056 Actual=0x0000000000000000
✗ FAIL: Shift Left (100 << 2)                    Expected=0x0000000000000190 Actual=0x0000000000000000
✗ FAIL: Shift Right (100 >> 2)                   Expected=0x0000000000000019 Actual=0x0000000000000000

Total simulation cycles: 100005
================================================================================

tb_processor.sv:265: $finish called at 1000145000 (1ps)


================================================================================
Simulation Summary
================================================================================
Total cycles executed: 100015
Simulation status:   COMPLETED
================================================================================


✓ Simulation complete

Checking results...
✓ PASS: Branch Result 2 (BNE: diff != 50, false) Expected=0x0000000000000000 Actual=0x0000000000000000
